---
layout: post
title:  "Scratch Notes for Stanford CS107: Programming Paradigm Ch04"
categories: technology
tags: cs107 paradigm 
author: LZN
---

* content
{:toc}

### L4: Creating a Generic Swap Function for Data Types of Arbitrary Size

#### Notes


##### Generic Swap

The generic swap function in the last lecture is useful for 4-byte figures. How to make it be a universial function? Look at the following realization:

```cpp
void swap(void *vp1, void *vp2, int size)
{
    char buffer[size];
    memcpy(buffer, vp1, size);
    memcpy(vp1, vp2, size);
    memcpy(vp2, buffer, size);
};

int x=17; y=37;
swap(&x,&y,sizeof(int));
```
`void *` means a generic pointer.
`char buffer[size]` is to set aside enough space to hold byte info.
`memcpy(target, source, size)` is a more generic function to copy byte info with respect to the byte length.
Most energy is used to dynamically allocate and deallocate buffer.

The perk of using this method compared to C++ template is that this way is lean and economical, while the C++ template will generate patches as much as the call times in the executables.

Wrong usage:
```cpp
int i = 44;
short j=5;
swap(&i, &j, sizeof(short))
```




#### Qustions

#### Appendix

##### C++ Template

Function templates are special functions that can operate with generic types. This allows us to create a function template whose functionality can be adapted to more than one type or class without repeating the entire code for each type.

```cpp
template <class myType>
myType GetMax (myType a, myType b) {
 return (a>b?a:b);
 }

 int x, y;
 GetMax <int> (x, y);
```

#### Glossary

```
perk 额外好处 sedate v. 安慰
```

**Updated 2020-08-06**

