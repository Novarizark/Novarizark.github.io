<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>LZN's Blog</title>
    <description></description>
    <link>http://202.116.70.212:80/</link>
    <atom:link href="http://202.116.70.212:80/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 18 Apr 2018 15:30:25 +0800</pubDate>
    <lastBuildDate>Wed, 18 Apr 2018 15:30:25 +0800</lastBuildDate>
    <generator>Jekyll v3.6.2</generator>
    
      <item>
        <title>学习与工作日记：关键词</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#20180312&quot; id=&quot;markdown-toc-20180312&quot;&gt;20180312&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#20180313&quot; id=&quot;markdown-toc-20180313&quot;&gt;20180313&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#20180417&quot; id=&quot;markdown-toc-20180417&quot;&gt;20180417&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;20180312&quot;&gt;20180312&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Blockchain
    &lt;ul&gt;
      &lt;li&gt;Block–&amp;gt;Header–&amp;gt;Nonce–&amp;gt;Hash&lt;/li&gt;
      &lt;li&gt;Double Spending–&amp;gt;6 Confirmation&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Encryption Algorithm
    &lt;ul&gt;
      &lt;li&gt;Symmetric-key
        &lt;ul&gt;
          &lt;li&gt;DES–&amp;gt;3DES–&amp;gt;AES&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Public-key Cryptography
        &lt;ul&gt;
          &lt;li&gt;RSA&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Python Class
    &lt;ul&gt;
      &lt;li&gt;__init(self,a,b,c)__ –&amp;gt; cls=class(a, b, c) –&amp;gt; cls.a&lt;/li&gt;
      &lt;li&gt;method(self) –&amp;gt; cls.method() –&amp;gt;class.method(cls)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;20180313&quot;&gt;20180313&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;pymysql
    &lt;ul&gt;
      &lt;li&gt;with connection.cursor() as cursor&lt;/li&gt;
      &lt;li&gt;connection.commit()&lt;/li&gt;
      &lt;li&gt;connection.close()&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;python-for-teens
    &lt;ul&gt;
      &lt;li&gt;string&lt;/li&gt;
      &lt;li&gt;if structure&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;20180417&quot;&gt;20180417&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Bayesian Model
    &lt;ul&gt;
      &lt;li&gt;Bayesian Model&lt;/li&gt;
      &lt;li&gt;Markov Chain&lt;/li&gt;
      &lt;li&gt;Mento Carlo&lt;/li&gt;
      &lt;li&gt;Markov Chain Mento Carlo (MCMC)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;strong&gt;Updated 2018-04-14&lt;/strong&gt;
</description>
        <pubDate>Tue, 17 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/04/17/keyword-notebook/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/04/17/keyword-notebook/</guid>
        
        <category>blog</category>
        
        <category>keyword&amp;nbspnotebook</category>
        
        
        <category>notebook</category>
        
        <category>linux</category>
        
        <category>algorithm</category>
        
      </item>
    
      <item>
        <title>为python增加默认的库搜索路径</title>
        <description>
明文密码丢到程序里当然是很傻逼的事情（参见斯导新片《头号玩家》），所以访问数据库用了AES加密（&lt;a href=&quot;https://novarizark.github.io/2018/03/12/cryptography-python-mysql/&quot;&gt;参见&lt;/a&gt;）。

数据库可是个好东西，慢慢很多程序都要开始访问数据库了，那么我们自己的加密模块能否不通过动态方式添加搜索路径，像import其他模块那样引用呢？答案当然是可以的，在bashrc中修改PYTHONPATH环境变量就可以啦。

当然这不是推荐方法，因为具有外部依赖性。推荐方法是在site-packages目录下增加一个扩展名为.pth的文件，在里面写入增加的搜索路径。这里有&lt;a href=&quot;https://blog.csdn.net/liang19890820/article/details/76219560&quot;&gt;很好的介绍&lt;/a&gt;。

&lt;strong&gt;Updated 2018-04-14&lt;/strong&gt;

</description>
        <pubDate>Sat, 14 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/04/14/python-search-path/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/04/14/python-search-path/</guid>
        
        <category>python_import</category>
        
        
        <category>python</category>
        
        <category>linux</category>
        
      </item>
    
      <item>
        <title>贝叶斯模型, MC, MC, 与MCMC</title>
        <description>
帮老板审稿，这稿子用了个非常牛逼的Bayesian Model+MCMC做降水的突变检验，很明显是个ML的方法，这么好的机会，肯定要抓着搞明白。

整理一些资料如下：

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://blog.csdn.net/pongba/article/details/2958094&quot;&gt;贝叶斯方法介绍&lt;/a&gt;&lt;/strong&gt;: 这是篇非常好的科普，从贝叶斯老爷的逆概问题讨论形式化的贝叶斯概型。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://site.douban.com/182577/widget/notes/10567181/note/292072927/&quot;&gt;MC, MC, MCMC&lt;/a&gt;&lt;/strong&gt;: 蒙特卡洛、马尔可夫链，到马尔可夫链蒙特卡洛方法。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E4%BC%BC%E7%84%B6%E5%87%BD%E6%95%B0&quot;&gt;似然函数&lt;/a&gt;&lt;/strong&gt;:终于明白了似然函数是什么意思，表征观测结果对应预期分布的似然性。定性的说，一个硬币投了一百次有90次正面，那么这个硬币正常的似然性很低很低。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;&quot;&gt;最大似然估计&lt;/a&gt;&lt;/strong&gt;:对同一个似然函数，如果存在一个参数值，使得它的函数值达到最大的话，那么这个值就是最为“合理”的参数值。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;http://sunyi514.github.io/2016/03/05/mcmc%E6%96%B9%E6%B3%95%E5%B0%8F%E8%AE%B0/&quot;&gt;MCMC方法小记&lt;/a&gt;&lt;/strong&gt;：好例子!&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;http://xccds1977.blogspot.kr/2014/07/mcmc.html&quot;&gt;理解MCMC&lt;/a&gt;&lt;/strong&gt;:好例子！&lt;/li&gt;
&lt;/ol&gt;

&lt;strong&gt;Updated 2018-04-14&lt;/strong&gt;

</description>
        <pubDate>Sat, 14 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/04/14/bayes-mcmc/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/04/14/bayes-mcmc/</guid>
        
        <category>machine&amp;nbsp;learning</category>
        
        <category>CUDA</category>
        
        <category>deep&amp;nbsp;learning</category>
        
        <category>MCMC</category>
        
        <category>Bayes</category>
        
        
        <category>machine&amp;nbsp;leanring</category>
        
      </item>
    
      <item>
        <title>从备份的wordpress数据库重建技术博客</title>
        <description>
接上篇&lt;a href=&quot;https://novarizark.github.io/2018/04/04/raid-rebuild/&quot;&gt;东校服务器RAID rebuild&lt;/a&gt;,接下来的任务是如何把wordpress的数据库内容导出，转成jekyll的markdown文档。

思路应该很简单直接，sql抽出来内容 日期 关键词（我当时只做了category分类，可以考虑直接充当关键词和分类，后续再调整），然后按jekyll的post格式给出即可。
工具：pymysql

google下，抽出post内容的几个关键语句如下：
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;c1&quot;&gt;--选出内容，唯一id，和category&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wpr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wp_terms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wp_terms&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INNER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wp_term_taxonomy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wp_terms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;term_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wp_term_taxonomy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;term_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INNER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wp_term_relationships&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wpr&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wpr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;term_taxonomy_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;wp_term_taxonomy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;term_taxonomy_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INNER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wp_posts&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wpr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;taxonomy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'category'&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'post'&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;strong&gt;Updated 2018-04-13&lt;/strong&gt;

</description>
        <pubDate>Fri, 13 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/04/13/wordpress-blog-rebuild/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/04/13/wordpress-blog-rebuild/</guid>
        
        <category>server</category>
        
        <category>blog</category>
        
        <category>database</category>
        
        <category>wordpress</category>
        
        <category>jekyll</category>
        
        <category>markdown</category>
        
        
        <category>notebook</category>
        
        <category>mysql</category>
        
      </item>
    
      <item>
        <title>东校实验室服务器阵列rebuild</title>
        <description>
东校实验室服务器坏掉了一块RAID 1的磁盘，购置新硬盘后测试rebuild发现几个配置页面都没有相关选项。

原RAID没出问题的磁盘被降级为foreign状态，

后查到&lt;a href=&quot;https://www.dell.com/support/article/cn/zh/cndhs1/sln129828/%E8%A7%A3%E5%86%B3poweredge-raid%E6%8E%A7%E5%88%B6%E5%99%A8%E9%94%99%E8%AF%AF-perc%E6%95%85%E9%9A%9C-?lang=zh&quot;&gt;官方文档&lt;/a&gt;

&lt;blockquote&gt;
  Foreign configuration(s) found on adapter. Press any key to continue, or ’C’ to load the configuration utility or ’F’ to import foreign configuration(s) and continue.
&lt;/blockquote&gt;

按F按键后导入foreign配置，开始进入系统。

进入系统后发现0号盘位闪橙色灯，也处于降级出错状态，妈蛋，这下有的玩了。于是联系L老师再次采购硬盘。
&lt;strong&gt;Updated 2017-12-30&lt;/strong&gt;

3月硬盘到货，测试直接将0盘位换成新硬盘，发现无法自动rebuild，无法识别1盘位的系统盘。

重新装回旧有硬盘后能够进入系统，但是只放置1盘位新硬盘，启动后出现无法找到superblock的错误。

怀疑能进入系统的好机会不多，迅速备份了技术博客后，关掉所有的crontab减少读写，希冀RAID卡能够将所有的数据rebuild到1盘位。等下周来看。

&lt;strong&gt;Updated 2018-03-28&lt;/strong&gt;

所以希冀是自欺欺人的。满心以为自动rebuild后，可以更换下0盘位，发现还是老样子。

想到新招数偷天换日，将2号盘位的non-RAID disk取下，更换上新硬盘后，把新硬盘做全局热备。&lt;a href=&quot;https://wenku.baidu.com/view/993960dfbb4cf7ec4afed023.html&quot;&gt;参考资料&lt;/a&gt;

没想到改全局热备后并没有rebuild，而且再次出现找不到superblock无法进入系统的情况。没招了，只有试图解决这个问题。测试&lt;a href=&quot;https://linuxexpresso.wordpress.com/2010/03/31/repair-a-broken-ext4-superblock-in-ubuntu/&quot;&gt;这个解决方案&lt;/a&gt;

发现牛逼的是所有的备份superblock都挂了。这是没救了？

尝试检查了一下fstab，发现奇怪的地方，fstab中将sda1挂载到/用户/data下，由于data存储较大，&lt;strong&gt;怀疑是2号位硬盘找不到，然后把系统盘sdb误认为是sda才出现superblock不匹配的地方。（上次更换0盘位也出现相同错误，可能更换或取下硬盘后影响了系统自检虚拟磁盘的顺序）&lt;/strong&gt;

尝试给回2盘位，可以进入系统；随后尝试删除fstab中对应语句，拔出2盘位，也可以进入系统，有戏，果然是这个原因！

接下来把2盘位更换为新硬盘，由于之前做了热备，现在显示为foreign状态，import foreign configure后，可以进入系统。进入系统后没有看到2盘位在闪烁，说明没有自动rebuild。

关机，将处于2盘位的新硬盘拿下并替换0盘位就硬盘，开机发现提示进入配置页面，进入后发现0盘位开始rebuild，Yeah！成功！

下午助教，去课室发现竟然没人，问了一下才知道换课了，磨叽了一会儿回去差不多两小时，发现rebuild居然卡在37%，奇怪。不管了，今天没时间耗着了，必须搞完。于是重启，突然想到为何不尝试一下之前的1号盘是否能读出。如果1号盘可用的话，那么直接rebuild到更新的时间点岂不是更好。

于是将0盘位换成之前的1号盘，果然可以！慎重起见，迅速备份技术博客，17年2月之后一直到8月底最后一篇博客，一点都不少，太好了！之后设置rebuild到这个盘就去吃饭了，当晚SH说0盘位掉线了，好吧，好在技术博客救回来了。下次去恢复到2月份的系统。

&lt;strong&gt;Updated 2018-04-04&lt;/strong&gt;

</description>
        <pubDate>Wed, 04 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/04/04/raid-rebuild/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/04/04/raid-rebuild/</guid>
        
        <category>raid</category>
        
        <category>server</category>
        
        
        <category>hardware</category>
        
      </item>
    
      <item>
        <title>20180403交易笔记-市场转向信号？</title>
        <description>
&lt;blockquote&gt;
  逻辑对的情况下，该如何把握节奏？
&lt;/blockquote&gt;

这段时间最大的感受就逻辑假设在不断验真，可节奏把握的确是一件颇具奇技淫巧，难以搞定的风骚操作。其实本质还是资金仓位管理以及择时判据，逻辑对的情况下（big picture）有定量分析加持才行。

从16年下半年就看空科技股，当然这节奏是严重不对的，不断学习过程中看到smart beta痴痴买入ETF的策略加上投机性买入对价格的不断推升可以持续如此之久。终于憋到今年2月份第一次利率冲击，波动性回归，市场进入震荡格局。

这几天F的信息泄露+川普对A的税收大棒挥起，科技股终于出现像样的下跌了，大概瞄了下QQQ应该是回到去年十一月的水平，会买么？我还不会。FAANG只有PE到20以下我才会心动，G目前EPS 18股价1k，55的PE；被干的F目前PE 29，至少跌倒20以内，才会下手。只有apple目前17+。

看了下最近的资金曲线，基本维持窄幅震荡，大概只有3%左右最大回撤，相比指数的跌宕起伏平缓很多。重新审视了下仓位、标的的分散性和风险敞口，依然不觉得有什么问题。风险投资占总资产比重已经下降到24%左右。

逻辑上接下来应该去验真第二轮的利率上升冲击、国际经贸形势变换冲击以及地缘政治关系紧张冲击等，适当加一些吃backwardation rolling的标的后继续走佛系路线：观察，等待。

我想也可以抛出结论了：

&lt;blockquote&gt;
  客观交易系统还不成熟的前提下，不要在乎节奏，减少操作，注意风险敞口和布局即可。
&lt;/blockquote&gt;

&lt;strong&gt;Updated 2018-04-03&lt;/strong&gt;
</description>
        <pubDate>Tue, 03 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/04/03/trading-diary/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/04/03/trading-diary/</guid>
        
        <category>investment</category>
        
        <category>stock</category>
        
        <category>ETF</category>
        
        <category>market&amp;nbspcrash</category>
        
        
        <category>economy</category>
        
        <category>investment</category>
        
        <category>notebook</category>
        
      </item>
    
      <item>
        <title>Porting WRF v3.8.1 on Tianhe2</title>
        <description>
帮JL移植wrf3.8.1到天河2号。首先调整环境变量。
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; /etc/bashrc &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; /etc/bashrc
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# edited on Apr 1, 2018 for WRF&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# User specific aliases and functions&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#bug fix&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; /WORK/app/osenv/ln1/set2.sh
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;MODULEPATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/WORK/app/modulefiles

&lt;span class=&quot;c&quot;&gt;#set COMMON input data path for CESM&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#export COMMON_CESM_INPUT=/WORK/app/CESM_inputdata&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#set Intel compiler and MPI&lt;/span&gt;
module load intel-compilers/13.0.0
module load MPI/Intel/MPICH/3.1-icc13
module load cmake/3.0.2

&lt;span class=&quot;c&quot;&gt;#set hdf5 and netcdf4 for WRF&lt;/span&gt;
module load hdf5/1.8.13/03-CF-13
module load netcdf/4.3.2/02-CF-13

&lt;span class=&quot;c&quot;&gt;#set jasper&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JASPER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/HOME/sio_goc017/WORKSPACE/jjl/soft/jasper-1.900.1
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JASPERLIB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$JASPER&lt;/span&gt;/lib
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JASPERINC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$JASPER&lt;/span&gt;/include

&lt;span class=&quot;c&quot;&gt;#set WRF&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WRFIO_NCD_LARGE_FILE_SUPPORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WRF_EM_CORE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;NETCDF4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BUFR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CRTM&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;J&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-j 12&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;MP_STACK_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4000000000
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;OMP_STACKSIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4000000000
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;KMP_STACKSIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4000000000
&lt;span class=&quot;nb&quot;&gt;ulimit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; unlimited
&lt;span class=&quot;nb&quot;&gt;ulimit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; unlimited

&lt;span class=&quot;nv&quot;&gt;MPI_BUFFER_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;128
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
注意在编译cumulus模块的地方大概要等待20分钟之久。采用上述环境变量出错：

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wrf.o: In &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;MAIN__&lt;span class=&quot;s1&quot;&gt;':
wrf.f90:(.text+0x1f): undefined reference to `__intel_new_feature_proc_init'&lt;/span&gt;
libwrflib.a&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;module_check_a_mundo.o&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: In &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;module_check_a_mundo_mp_check_nml_consistency_&lt;span class=&quot;s1&quot;&gt;':
module_check_a_mundo.f90:(.text+0x31fa): undefined reference to `__intel_ssse3_rep_memmove'&lt;/span&gt;
module_check_a_mundo.f90:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;.text+0x35ea&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: undefined reference to &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;__intel_ssse3_rep_memmove&lt;span class=&quot;s1&quot;&gt;'
libwrflib.a(module_mp_etanew.o): In function `module_mp_etanew_mp_etanewinit_'&lt;/span&gt;:
module_mp_etanew.f90:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;.text+0xacb0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: undefined reference to &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;__intel_ssse3_rep_memmove&lt;span class=&quot;s1&quot;&gt;'
libwrflib.a(module_mp_thompson.o): In function `module_mp_thompson_mp_table_ccnact_'&lt;/span&gt;:
module_mp_thompson.f90:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;.text+0x2ed74&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: undefined reference to &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;__intel_ssse3_rep_memmove&lt;span class=&quot;s1&quot;&gt;'
libwrflib.a(module_ra_rrtm.o): In function `module_ra_rrtm_mp_rrtm_lookuptable_'&lt;/span&gt;:
module_ra_rrtm.f90:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;.text+0x256ea&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: undefined reference to &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;__intel_ssse3_rep_memmove&lt;span class=&quot;s1&quot;&gt;'
libwrflib.a(module_ra_rrtmg_lw.o):module_ra_rrtmg_lw.f90:(.text+0x769bf): more undefined references to `__intel_ssse3_rep_memmove'&lt;/span&gt; follow
/WORK/sio_goc017/jjl/wrfdata/WRFV3/external/io_grib_share/libio_grib_share.a&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;io_grib_share.o&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: In &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;transpose_grib_&lt;span class=&quot;s1&quot;&gt;':
io_grib_share.f90:(.text+0x1ee4): undefined reference to `_intel_fast_memmove'&lt;/span&gt;
/WORK/sio_goc017/jjl/wrfdata/WRFV3/external/io_grib_share/libio_grib_share.a&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;io_grib_share.o&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: In &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;transpose1d_grib_&lt;span class=&quot;s1&quot;&gt;':
io_grib_share.f90:(.text+0x26f5): undefined reference to `_intel_fast_memmove'&lt;/span&gt;
io_grib_share.f90:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;.text+0x29e3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: undefined reference to &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;_intel_fast_memmove&lt;span class=&quot;s1&quot;&gt;'
0.57user 4.84system 0:08.12elapsed 66%CPU (0avgtext+0avgdata 487696maxresident)k
12392inputs+102200outputs (47major+183178minor)pagefaults 0swaps
make[1]: [em_wrf] Error 1 (ignored)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
Google以下，发现intel官网的&lt;a href=&quot;https://software.intel.com/en-us/forums/intel-fortran-compiler-for-linux-and-mac-os-x/topic/494782&quot;&gt;trouble shooting page&lt;/a&gt;
以下内容：
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;I believe the message may be caused by mixing objects built with different compiler versions. The __intel_new_feature_proc_init entry point is only in recent compiler libraries; if you have code built with a recent compiler, but are linking to older run-time libraries, you might encounter such a problem.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

有道理，可能是之前编译的模块没有删掉。执行
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$./clean -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
再次测试一下.出现难以理解的错误：
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nup_em.f90(68): error #7002: Error in opening the compiled module file.  Check INCLUDE paths.   [MODULE_INITIALIZE_REAL]
   USE module_initialize_real, only : wrfu_initialize
   -------^
   real_em.f90(12): error #7002: Error in opening the compiled module file.  Check INCLUDE paths.   [MODULE_INITIALIZE_REAL]

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
表示找不到include文件。到相关目录下检查发现文件确实存在，奇葩……重新执行compile语句后编译成功。怀疑是天河的文件系统不稳定造成。

测试WPS编译出错。
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;make[1]: pathf90: Command not found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
检查了下发现自己选错了architecture，并不是与前面相同的#15，而是#19.

&lt;strong&gt;Updated 2018-04-01&lt;/strong&gt;

据CM大哥表示，天河不开NC4编译是不行的。果然，JL运行出错，测试NC4打开后是否能解决。

&lt;strong&gt;Updated 2018-04-03&lt;/strong&gt;

</description>
        <pubDate>Sun, 01 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/04/01/jinlin-wrf-tianhe2/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/04/01/jinlin-wrf-tianhe2/</guid>
        
        <category>server</category>
        
        <category>WRF</category>
        
        
        <category>hardware</category>
        
        <category>linux</category>
        
        <category>notebook</category>
        
      </item>
    
      <item>
        <title>测试基于tensorflow的图片分类器</title>
        <description>
开始测试tensorflow的图片分类器！
按&lt;a href=&quot;https://www.youtube.com/watch?v=gIhUePPFmpY&quot;&gt;这个视频&lt;/a&gt;来，发现train的一步出现问题
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ERROR:tensorflow:Couldn't understand architecture name ''
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
发现是指定的环境变量读不到，于是将给ARCH赋值的语句和python执行语句一起放到shell脚本里，问题解决。
train的过程大概用了不到五分钟，估计30-60min的经验是CPU-based，tf应该自动选用cuda解决了。

之后做测试，效果很好。

&lt;img src=&quot;https://ws1.sinaimg.cn/large/73ebdc71ly1fpwweqdx63j20fz0790t7.jpg&quot; alt=&quot;&quot; /&gt;

&lt;strong&gt;Updated 2018-03-30&lt;/strong&gt;
</description>
        <pubDate>Fri, 30 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/03/30/tf-img-classifier/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/03/30/tf-img-classifier/</guid>
        
        <category>tensorflow</category>
        
        
        <category>python</category>
        
        <category>notebook</category>
        
      </item>
    
      <item>
        <title>我的技术博客有救了！</title>
        <description>周三助教回到东校，决定去处理一下实验室服务器，看下我的wordpress博客内容到底还有没有救。因为&lt;a href=&quot;https://novarizark.github.io/2017/12/30/raid-rebuild/&quot;&gt;上次&lt;/a&gt;做了1号盘位的rebuild，这次测试将0号盘位degraded的旧硬盘换下。
可是将0号盘位换下后，1号盘位显示为non-raid磁盘，而0号新盘直接不认，what the fuck。怀疑是上次rebuild没有完成，所以将旧硬盘再次换到0号位置让raid卡自己玩去。
换上旧硬盘后可以正常识别到raid信息并进入系统。测试mysql数据库居然发现wp_posts数据都存在，太幸运了，我的技术博客有救了！果断导出。

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; localhost &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--database&lt;/span&gt; wordpress | gzip &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; backupfile.sql.gz
gunzip &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; backupfile.sql.gz &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; bck.sql 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

之后在mysql下导入
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bck&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

查看中文时注意utf8编码
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;names&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utf8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

后面考虑写个python脚本将过去的日志转成markdown放到jekyll博客下。

&lt;strong&gt;Updated 2018-03-28&lt;/strong&gt;
</description>
        <pubDate>Wed, 28 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/03/28/recover-techblog/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/03/28/recover-techblog/</guid>
        
        <category>server</category>
        
        <category>blog</category>
        
        <category>jekyll</category>
        
        
        <category>hardware</category>
        
        <category>linux</category>
        
        <category>mysql</category>
        
      </item>
    
      <item>
        <title>Form principles from mistakes</title>
        <description>如何按照达里奥的《原则》来处理生活、学习、工作、投资？Learn from mistakes非常重要。出错不怕，怕的是知错不改。策略法则的反脆弱性来自于不断试错和快速迭代。快速迭代要求知错而改，而不是在同一条道路上反复撞墙。
这篇文章用于总结经历过的错误，并试图从错误中抽象避免下次出现同样问题的原则。

勘误表

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ID&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Date&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;目标&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;失败情况&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;失败原因&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;总结原则&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;20180105&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;因肠胃问题中山二院就医&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1. 没携带医保卡（实际并不需要，但不应遗漏）&lt;br /&gt;2. 没有携带病历&lt;br /&gt; 3.粪便检查没有携带纸巾，不得不外出购买&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;没有条理化检查任务所需准备&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1.条理化检查执行任务所需要的准备&lt;br /&gt; 2.随身携带纸巾是具有保险性质的操作&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;20180119&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;参加JW婚礼需要一双皮鞋&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;鞋码购买错误，造成不便&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;没有细致查看购买条款及介绍，没有联系客服&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;购买物品时反复查验其属性说明是否合乎要求&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;20180207&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返程火车票学生票&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;学生证缺少注册章损失187元&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;学生证拿去注册后没有仔细查验注册章&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;仔细查验对后续任务有重要影响的任务完成情况&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;strong&gt;Updated 2018-03-26&lt;/strong&gt;
</description>
        <pubDate>Mon, 26 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://202.116.70.212:80/2018/03/26/principle-from-mistakes/</link>
        <guid isPermaLink="true">http://202.116.70.212:80/2018/03/26/principle-from-mistakes/</guid>
        
        <category>thinking</category>
        
        <category>blog</category>
        
        
        <category>principle</category>
        
      </item>
    
  </channel>
</rss>
